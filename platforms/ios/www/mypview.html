<!DOCTYPE html>
<html>

<head>
	<link rel="stylesheet" type="text/css" href="css/mypview.css">
	   <a href="vhomepage.html" target="_self"> <img alt="" class="auto-style2" src="logo-2.jpg" width="75px" hight= "30" style= "margin-left: 10px; margin-top: 5px;"></a><br><br>
	<script type="text/javascript" src="js/jquery.js"></script>
	<script type="text/javascript" src="js/jquery-migrate.js"></script>
	<script type="text/javascript" src="js/spin.js"></script>
	<script>
	$(document).ready(function(){
		var opts = {
		  lines: 16, // The number of lines to draw
		  length: 7, // The length of each line
		  width: 4, // The line thickness
		  radius: 10, // The radius of the inner circle
		  color: '#000', // #rgb or #rrggbb
		  speed: 1, // Rounds per second
		  trail: 60, // Afterglow percentage
		  shadow: false // Whether to render a shadow
		  
		};
		var spinner = new Spinner(opts).spin();
		var target = document.getElementById('body');
	
		var spinner = new Spinner(opts).spin(target);
		$('#overlay').show();
		$('#PP1').hide();
		$('#PP2').hide();
		$('#PP3').hide();
		$('#PP4').hide();
		
		
		var i=window.localStorage.getItem('theMyI');
		window.localStorage.setItem('promotionid', 0);
		var id=window.localStorage.getItem('id');
	
		$.get('http://still-shore-7988.herokuapp.com/showp.json?id='+id, 'json',function(data){
	
			var len=data.promotions.length;
			if(i!=len){
			$('#p1').text(data.promotions[i].name);
			$('#dis').text(data.promotions[i].discount);
			$('#date').text(data.promotions[i].end_date);
		
			$('#description1').text(data.promotions[i].description);
	
			var $addDiv=$('#pi1');
	
			$addDiv.append(' <img border="0" height="70" weight="60" src="' + data.uimage.url + '" height= "115" style= "margin-left: 10px; margin-top: 30; z-index: 1; position: absolute; height: 60px; top: 80px; left: 123px; background-color: #6A6A6B; layer-background-color: #6A6A6B; border: 1px none #000000; width: 182.5px;">');
			
			var $add=$('#link1');

			$add.append('<a href="editp.html" onclick="return anything(' + data.promotions[i].id + ')" class="ui-btn-right" data-icon="arrow-r"><img alt="" class="auto-style2" src="edit.png" width="20px" hight= "20" style= "margin-left: 165px;"></a>');
			

			$add.append('&nbsp;&nbsp;&nbsp; <a href="" onclick="return dPromotion(' + data.promotions[i].id + ')" class="ui-btn-right" data-icon="arrow-r"><img alt="" class="auto-style2" src="delete.png" width="20px" hight= "20" style= "margin-left: 0px;"></a>');
			
			i=Number(i)+1;
			if(i!=len){
			$('#p2').text(data.promotions[i].name);
			$('#dis2').text(data.promotions[i].discount);
			$('#date2').text(data.promotions[i].end_date);
			$('#description2').text(data.promotions[i].description);
			
			var $addDiv=$('#pi2');

			$addDiv.append(' <img border="0" height="70" weight="60" src="' + data.uimage.url + '" hight= "30" style= "margin-left: 10px; margin-top: 30; z-index: 1; position: absolute; height: 60px; top: 207px; left: 123px; background-color: #6A6A6B; layer-background-color: #6A6A6B; border: 1px none #000000; width: 182.5px;">');
			var $add=$('#link2');

			$add.append('<a href="editp.html" onclick="return anything(' + data.promotions[i].id + ')" class="ui-btn-right" data-icon="arrow-r"><img alt="" class="auto-style2" src="edit.png" width="20px" hight= "20" style= "margin-left: 50px;margin-top: 193px"></a>');
			

			$add.append('&nbsp;&nbsp;&nbsp; <a href="" onclick="return dPromotion(' + data.promotions[i].id + ')" class="ui-btn-right" data-icon="arrow-r"><img alt="" class="auto-style2" src="delete.png" width="20px" hight= "20" style= "margin-top: 193px"></a>');
			
			i=Number(i)+1;
			if(i!=len){
			
			$('#p3').text(data.promotions[i].name);
			$('#dis3').text(data.promotions[i].discount);
			$('#date3').text(data.promotions[i].end_date);
			$('#description3').text(data.promotions[i].description);
			var $addDiv=$('#pi3');

			$addDiv.append(' <img border="0" height="70" weight="60" src="' + data.uimage.url + '" alt="a1" width="188" class="auto-style2" style= "margin-left: 10px; margin-top: 30; z-index: 1; position: absolute; height: 60px; top: 334px; left: 123px; background-color: #6A6A6B; layer-background-color: #6A6A6B; border: 1px none #000000; width: 182.5px;" height= "30">');
			
			var $add=$('#link3');

			$add.append('<a href="editp.html" onclick="return anything(' + data.promotions[i].id + ')" class="ui-btn-right" data-icon="arrow-r"><img alt="" class="auto-style2" src="edit.png" width="20px" hight= "20" style= "margin-left: 50px; margin-top: 320px"></a>');
			

			$add.append('&nbsp;&nbsp;&nbsp; <a href="" onclick="return dPromotion(' + data.promotions[i].id + ')" class="ui-btn-right" data-icon="arrow-r"><img alt="" class="auto-style2" src="delete.png" width="20px" hight= "20"></a>');
			
			i=Number(i)+1;
			if(i!=len){
			$('#p4').text(data.promotions[i].name);
			$('#dis4').text(data.promotions[i].discount);
			$('#date4').text(data.promotions[i].end_date);
	//		$('#des4').text(data[i].branch);
			$('#description4').text(data.promotions[i].description);
			var $addDiv=$('#pi4');

			$addDiv.append(' <img border="0" height="70" weight="60" src="' + data.uimage.url + '" alt="a1" width="188" class="auto-style2" style= "margin-left: 10px; margin-top: 30; z-index: 1; position: absolute; height: 60px; top: 459px; left: 123px; background-color: #6A6A6B; layer-background-color: #6A6A6B; border: 1px none #000000; width: 182.5px;" hight= "30">');
			
			var $add=$('#link4');

			$add.append('<a href="editp.html" onclick="return anything(' + data.promotions[i].id + ')" class="ui-btn-right" data-icon="arrow-r"><img alt="" class="auto-style2" src="edit.png" width="20px" hight= "20" style= "margin-left: 50px; margin-top: 445px"></a>');
			

			$add.append('&nbsp;&nbsp;&nbsp; <a href="" onclick="return dPromotion(' + data.promotions[i].id + ')" class="ui-btn-right" data-icon="arrow-r"><img alt="" class="auto-style2" src="delete.png" width="20px" hight= "20"></a>');
			$('#PP1').show();
			$('#PP2').show();
			$('#PP3').show();
			$('#PP4').show();
			i = i + 1;
			if(i==len){
				document.getElementById('showmore').style.display = 'none';
			}
        }
		else{
			$('#PP1').show();
			$('#PP2').show();
			$('#PP3').show();
		   	document.getElementById('PP4').style.display = 'none';
			document.getElementById('showmore').style.display = 'none';
		}
	} else{
		$('#PP1').show();
		$('#PP2').show();
		document.getElementById('PP3').style.display = 'none';
		document.getElementById('PP4').style.display = 'none';
		document.getElementById('showmore').style.display = 'none';
		
	}
} else {
	$('#PP1').show();

	document.getElementById('PP2').style.display = 'none';
	document.getElementById('PP3').style.display = 'none';
	document.getElementById('PP4').style.display = 'none';
	document.getElementById('showmore').style.display = 'none';
	
}
}
else {
	document.getElementById('PP1').style.display = 'none';
	document.getElementById('PP2').style.display = 'none';
	document.getElementById('PP3').style.display = 'none';
	document.getElementById('PP4').style.display = 'none';
	document.getElementById('showmore').style.display = 'none';
	var $addDiv = $('#no');
	$addDiv.html('You do not have <br> any promotions');
}
		spinner.stop();
		$('#overlay').hide();
		});
		});
		function anything(id){

			window.localStorage.setItem('promotionid', id)
		}
		function myFunction(){
			var i=window.localStorage.getItem('theMyI');
			window.localStorage.setItem('theMyI',(Number(i)+4));
			location.reload();
		}
		function dPromotion(id){

  		  $.ajax({
  			  type:'DELETE',
  			  url: 'http://still-shore-7988.herokuapp.com/promotions/'+id+'.json',
  			  success: function(data, textStatus, jqXHR){

				  
  			  },
  			  error: function(jqXHR, data, errorThrown){

  			  }
  		  });
		  location.reload();
		  
		}
		</script>

 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>

<body id="body">
	<span id="no"> </span>
<div id="overlay"> </div>
<div id="apDiv1" >

  <h1><span class="auto-style1">My</span> <span class="auto-style2">Promotions</span></h1>
</div>
       &nbsp;<div id="apDiv2"></div>






<div id="PP1">



<div id="Promotion1">
<span id="date"> <br></span> 		 
<span id="p1"> <br></span>
<span id="dis"> <br></span> 
<span id="link1" style="font-size: 10px; color: #F7FBEC; z-index: 2; left: 23px; top: 168px; position: absolute; height: 20px"></span> 
<span id="description1"><br></span>
<p1 id="per1" > %</p1>
<p2 id="per2"> Valid Until:</p2>



<div id="pi1">
</div>

 <div id="apDiv3"> hello</div>
<div id="apDiv4"></div>
</div>
</div>



<div id="PP2">

<div id="Promotion2">
<div id="pi2"> </div>
<div class="Promotion2">            	 
<span id="date2" > <br></span> 				 
<span id="p2" > <br></span>
<span id="description2"><br></span>
<span id="dis2"> <br></span> </div> 
<span id="link2" style="font-size: 10px; color: #F7FBEC; z-index: 2; left: 143px; position: absolute; height: 20px"> </span> 
<p3 id="per3" > %</p3>
<p4 id="per4"> Valid Until:</p4>

<div id="apDiv5"></div>
<div id="apDiv6" style="background-color: #EA5948"></div>

</div>
</div>

<div id="PP3">

<div class="Promotion3"> 
<div id="pi3"> </div>         	 
<span id="date3" > <br></span> 
<span id="p3" > <br></span>
<span id="dis3"> <br></span> 
<span id="description3"><br></span>
<span id="link3" style="font-size: 10px; color: #F7FBEC; z-index: 2; left: 143px; position: absolute; height: 20px"> </span> 
<p5 id="per5" > %</p5>
<p6 id="per6"> Valid Until:</p6>

<div id="apDiv7"></div>
<div id="apDiv8"></div>
</div>
</div>

<div id="PP4">

<div class="Promotion4" style="z-index: 1; width: 116px; height: 28px;"> 
<div id="pi4"> </div>         	 
<span id="date4" > <br></span> 
<span id="p4" > <br></span>
<span id="dis4"> <br></span> 
<span id="description4"><br></span>
<span id="link4" style="font-size: 10px; color: #F7FBEC; z-index: 2; left: 143px; position: absolute; height: 20px"> </span> 
<p7 id="per7" > %</p7>
<span class="auto-style8" id="per8">Valid Until:</span>


<div id="apDiv12" style="background-color: #EA5948"></div>
<div id="apDiv13" style="background-color: #EA5948"></div>
</div>
</div>
<div id="apDiv10"><button id="showmore" onclick="return myFunction()" class="btn1" style="background-color: #F7FBEC; color: #6F5554;">Show More</button></div>

                  
</body>
</html>